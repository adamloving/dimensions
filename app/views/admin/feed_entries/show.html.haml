= content_for :sidebar do
  %h3
    FeedEntry
  #panel_contents
    %h4
      State
    %p
      = @feed_entry.state
    %h4
      Visibility
    %p
      = @feed_entry.visible? ? "Showing" : "Hidden"
%table
  %tbody
    %tr
      %td
        Name
      %td
        = @feed_entry.name
    %tr
      %td
        Url
      %td
        = @feed_entry.url
    %tr
      %td
        Published At:
      %td
        = @feed_entry.published_at
    %tr
      %td
        Author
      %td
        = @feed_entry.author
    %tr
      %td
        Summary
      %td
        = @feed_entry.summary
    %tr
      %td
        Content
      %td
        - if @feed_entry.content.nil?
          = link_to "Process", fetch_content_admin_news_feed_feed_entry_path(@feed_entry.feed, @feed_entry), :method => :post, :class=>"button_link process-entry", :style=>"float:left;", 'data-entry-id' => @feed_entry.id
        - else
          .more-less
            .text-block
              %p
                = @feed_entry.content

    - if @feed_entry.localized?
      %tr
        %td
          City
        %td
          = @feed_entry.shortname
      %tr
        %td
          Country
        %td
          = @feed_entry.country
      %tr
        %td
          Latitude
        %td
          = @feed_entry.latitude
      %tr
        %td
          Longitude
        %td
          = @feed_entry.longitude

= entry_toggle_visibility_link(@feed_entry,{:class=>"button_link"}) 

.ajax_loading

:javascript
  $(function(){
    $(document).moreless({
      anchorClass: 'adjust',
      contentContainer: 'text-block',
      lessText: 'Show Less',
      moreText: 'Show More',
      outerContainer: 'more-less',
      startHeight: 90
    });

    var link = $('a.process-entry');
    link.click(function(){
      $.ajax({
        url: link.attr('href'),
        type: 'POST',
        dataType: 'json',
        data: "id=" + link.data('entry-id'),
        success: function(data){
          console.log(data);
        }
      });
      return false;
    });
  });
