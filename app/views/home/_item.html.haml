= javascript_include_tag 'dimensions/timefield'
%script#item-template{:type=>"text/x-jquery-tmpl"}
  {{if Object.keys(items.pags).length > 0 }}
  %span.currentpage
    -#${"Showing from "+((items.pags[parseInt(items.current)] > items.len )?(items.pags[parseInt(items.current)]-items.len+1):((items.pags[(parseInt(items.current)-1)]+1)))+" to "+items.pags[parseInt(items.current)]+" of "+ items.matches}
  .pagination
    %ul
      {{each(i,item) items.pags}}
      %li{:class=>"${(items.current == (i))?'active':''}"}
        %a{:href=>"\#/search#page\#${i}"}${i}
      {{/each}}
  {{/if}}
  {{each(i,item) items.results}}
  .br{:style=>"clear:both;"}
  .item
    .post-it
      {{if img}}
      %img{:src=>"img",:style=>"width:98%"}
      {{else}}
      %img{:src=>"/images/news.png",:style=>"width:98%"}
      {{/if}}
    .body
      %h3.headline.unread ${text}
      .article-details
        {{if photo_url}}
        %img{:src=>'${photo_url}',:class=>"show",:target=>"_blank"}
        {{/if}}
        %a{:href=>'${item.url}',:target=>"_blank"} ${item.url}
        {{if variable_2}}
        .date 
          Published 
          %span.date{:class=>"timefield t:${variable_2*1000}"}
        {{/if}}
        %br
        .tags
          ${tags}
        .fb-like{"data-href"=>"${url}", "data-send"=>"true", "data-width"=>"450", "data-show-faces"=>"true"}
  {{/each}}
